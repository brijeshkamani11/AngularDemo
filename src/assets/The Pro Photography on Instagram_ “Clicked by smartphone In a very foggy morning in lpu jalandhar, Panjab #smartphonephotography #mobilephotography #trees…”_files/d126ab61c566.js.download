__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),r(d[0]);const t=7;class n extends a(d[8]).Component{constructor(...t){super(...t),this.state={candidates:new Map,isForwardActionPending:!1,isSearching:!1,query:'',recipients:new Map},this.$DirectSearchUserContainer1=((t,n)=>{const{filteredCandidates:s}=this.props;null!=s&&s.includes(t.id)||n.set(t.id,{type:'user',candidate:t})}),this.$DirectSearchUserContainer2=((t,n,s)=>{const{filteredCandidates:c,onAddUsers:o}=this.props;o(n),null!=c&&c.includes(t.id)||s.set(t.id,{type:'thread',candidate:t})}),this.$DirectSearchUserContainer3=(()=>{const{includeGroup:t}=this.props,{candidates:n,query:s}=this.state,c=s.length>0;this.setState({isSearching:c,candidates:c?n:new Map},()=>{i(d[1]).logDirectClientEvent('direct_compose_search',r(d[1]).DIRECT_CONTAINER_MODULES.direct_recipient_list,{search_string:s});const n=!0===t?r(d[2]).getRankedRecipientsWithGroups:r(d[2]).getRankedRecipients;c&&n(s).then(t=>{const n=new Map;t.ranked_recipients.forEach(t=>{if(t.user){const s=t.user,{entities:c}=i(d[3])([s]),o=c.users[s.pk];this.$DirectSearchUserContainer1(o,n)}else if(t.thread){const s=t.thread,c=s.thread_id,{entities:o}=i(d[4])([s]),{threads:h,users:l}=o,p=h[c];this.$DirectSearchUserContainer2(p,l,n)}else i(d[5])('Expected recipient of type user or thread')}),this.setState({candidates:n,isSearching:!1})},t=>{this.setState({isSearching:!1})})})}),this.$DirectSearchUserContainer4=i(d[6])(()=>{this.$DirectSearchUserContainer3()},250),this.$DirectSearchUserContainer8=(t=>{const n=new Map(this.state.recipients);n.delete(t),this.$DirectSearchUserContainer5(n)}),this.$DirectSearchUserContainer9=(()=>{const{forwardAction:t}=this.props;this.setState({isForwardActionPending:!0}),Promise.resolve(t(this.state.recipients)).then(()=>this.setState({isForwardActionPending:!1})).catch(()=>this.setState({isForwardActionPending:!1}))}),this.$DirectSearchUserContainer10=(t=>{const n=t.target.value,s=n.length>0;this.setState({query:n,isSearching:s},this.$DirectSearchUserContainer4)}),this.$DirectSearchUserContainer11=(t=>{const{recipients:n}=this.state;n.has(t)?this.$DirectSearchUserContainer8(t):(this.$DirectSearchUserContainer6(t),this.setState({query:''}))}),this.$DirectSearchUserContainer7=(()=>{const{fallbackCandidates:t}=this.props,{candidates:n,query:s}=this.state;return''!==s.trim()?n:t})}componentDidMount(){this.props.inboxLoaded||this.setState({isSearching:!0},()=>{this.props.onInboxInit().then(()=>{this.setState({isSearching:!1})}).catch(()=>{this.setState({isSearching:!1})})})}$DirectSearchUserContainer5(t){this.setState({recipients:t})}$DirectSearchUserContainer6(t){if(this.state.recipients.size>=this.props.maxRecipients)return;const n=this.$DirectSearchUserContainer7().get(t);if(!n)return;const s=new Map(this.state.recipients);s.set(t,n),this.$DirectSearchUserContainer5(s)}$DirectSearchUserContainer12(){const{isSearching:n}=this.state;if(n)return i(d[7])(t).map(t=>a(d[8]).createElement(r(d[9]).ListItemPlaceholder,{key:t,size:"large"}));const s=this.$DirectSearchUserContainer7();return 0===s.size?a(d[8]).createElement(r(d[9]).Box,{margin:4},a(d[8]).createElement(r(d[9]).Text.Body,{color:"ig-secondary-text"},r(d[10])(862))):[...s.keys()].map(t=>{const n=this.state.recipients.has(t),c=i(d[11])(s.get(t));switch(c.type){case'thread':{const s=c.candidate;return a(d[8]).createElement(i(d[12]),{candidateId:t,isSelected:n,key:t,onToggleCandidate:this.$DirectSearchUserContainer11,thread:s})}case'user':{const s=c.candidate,{full_name:o,profile_pic_url:h,username:l}=s,p=a(d[8]).createElement(i(d[13]),{isLink:!1,profilePictureUrl:h,size:44,username:l});return a(d[8]).createElement(i(d[14]),{candidateId:t,icon:p,isSelected:n,key:t,onToggleCandidate:this.$DirectSearchUserContainer11,subtitle:o,title:l})}default:return i(d[5])('Expected candidate of type thread or user'),null}})}$DirectSearchUserContainer13(t){const{backAction:n,forwardText:s,isModal:c}=this.props,{isForwardActionPending:o,recipients:h}=this.state,l=!0===c?a(d[8]).createElement(i(d[15]),{onClick:n,padding:0},a(d[8]).createElement(i(d[16]),{alt:r(d[17]).CLOSE_TEXT,color:"ig-primary-text",size:18})):a(d[8]).createElement(i(d[18]),{href:r(d[19]).DIRECT_INBOX,onClick:n}),p=a(d[8]).createElement(r(d[9]).Button,{borderless:!0,disabled:0===h.size,large:!0,loading:o,onClick:this.$DirectSearchUserContainer9},null!=s?s:r(d[20]).NEXT_STRING),S={leftActions:l,rightActions:p,title:t},u=a(d[8]).createElement(i(d[21]),i(d[22])({className:!0===c?"_6mv7E":""},S));return r(d[23]).isDesktop()?!0===c?a(d[8]).createElement(r(d[9]).ModalHeader,{endAdornment:a(d[8]).createElement(r(d[9]).Box,{paddingX:4},p),startAdornment:a(d[8]).createElement(r(d[9]).Box,{paddingX:4},l)},t):a(d[8]).createElement(i(d[24]),S):a(d[8]).createElement(a(d[8]).Fragment,null,!0!==c?a(d[8]).createElement(r(d[25]).PortalTo,{targetId:"direct-mobile-header"},u):u)}render(){const{pageId:t,title:n,tooltip:s}=this.props,{query:c}=this.state,o=null!=n?n:r(d[20]).NEW_MESSAGE_STRING;return a(d[8]).createElement(a(d[8]).Fragment,null,a(d[8]).createElement(i(d[26]),{base:r(d[20]).INSTAGRAM_DIRECT_NAME,id:t,title:o}),this.$DirectSearchUserContainer13(o),s,a(d[8]).createElement(r(d[9]).Box,{flex:"grow",overflow:"hidden"},a(d[8]).createElement("div",{className:"TGYkm"},a(d[8]).createElement(i(d[27]),{onRemoveRecipient:this.$DirectSearchUserContainer8,onTextInputChange:this.$DirectSearchUserContainer10,query:c,recipients:this.state.recipients})),a(d[8]).createElement(r(d[9]).Box,{flex:"grow",overflow:"scrollY"},''===c&&a(d[8]).createElement(r(d[9]).Box,{margin:4},a(d[8]).createElement(r(d[9]).Text.BodyEmphasized,{zeroMargin:!0},r(d[20]).SUGGESTED_HEADER)),this.$DirectSearchUserContainer12())))}}n.defaultProps={maxRecipients:r(d[28]).MAX_DIRECT_THREAD_RECIPIENTS};var s=r(d[31]).connect((t,n)=>({fallbackCandidates:r(d[29]).getFallbackCandidates(t,n),inboxLoaded:t.direct.inboxLoaded}),(t,n)=>({onAddUsers:n=>t(r(d[30]).addUsers(n)),onInboxInit:()=>t(r(d[30]).initInbox())}))(n);e.default=s},9830400,[9830401,9830402,9830403,9830404,9830405,9633859,9830406,9830407,3,9633821,9633796,9633799,9830408,9633802,9830409,9830410,9830411,9633809,9830412,9633888,9830413,9830414,9633864,9633829,9830415,9830416,9633806,9830417,9830418,9830419,9830420,5]);
__d(function() {},9830401,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});var t=r(d[5]).connect(function(t,n){const{users:s}=n.thread;return{usernames:r(d[4]).getDirectUsernameById(t,s)}})(function({candidateId:t,isSelected:n,onToggleCandidate:s,thread:u,usernames:c}){const{thread_title:l,users:o}=u;if(0===o.length)return null;const f=a(d[0]).createElement(i(d[1]),{isLink:!0,size:"medium",users:o});return a(d[0]).createElement(i(d[2]),{candidateId:t,icon:f,isSelected:n,key:t,onToggleCandidate:s,subtitle:r(d[3]).getGroupSubtitle(c),title:l})});e.default=t},9830408,[3,9830421,9830409,9830422,9830419,5]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),r(d[0]);const t={default:56,medium:40,small:32,tiny:24,atomic:16},n={default:40,medium:32,small:20};var l=r(d[7]).connect(()=>{const t=r(d[6]).makeGetDirectUsersByIds();return function(n,l){return{avatarUsersUnfiltered:t(n,l)}}})(({avatarUsersUnfiltered:l,isActive:s,isLink:u,isGroup:o,size:c,viewer:f})=>{const p=t[c],v=!!s,E=!0===o&&1===l.length?[...l,f]:l;if(0===E.length)return a(d[1]).createElement(r(d[2]).Box,{alignItems:"end",direction:"row",justifyContent:"end"},a(d[1]).createElement(i(d[3]),{isLink:!!u,profilePictureUrl:null===f||void 0===f?void 0:f.profile_pic_url,size:p,username:null===f||void 0===f?void 0:f.username}),v&&a(d[1]).createElement(i(d[4]),{isGroup:!1,size:c}));if(1===E.length)return a(d[1]).createElement(r(d[2]).Box,{alignItems:"end",direction:"row",justifyContent:"end"},a(d[1]).createElement(i(d[3]),{isLink:!!u,profilePictureUrl:E[0].profile_pic_url,size:p,username:E[0].username}),v&&a(d[1]).createElement(i(d[4]),{isGroup:!1,size:c}));'tiny'!==c&&'atomic'!==c||i(d[5])(0);const _=n[c];return a(d[1]).createElement(r(d[2]).Box,{height:p,position:"relative",width:p},a(d[1]).createElement(i(d[3]),{isLink:!1,profilePictureUrl:E[1].profile_pic_url,size:_,username:E[1].username}),a(d[1]).createElement("div",{className:`hl4pY ${'default'===c?"lNcMQ":""} ${'small'===c||'medium'===c?"uj9Qz":""}`},a(d[1]).createElement(r(d[2]).Box,{alignItems:"end",direction:"row",justifyContent:"end"},a(d[1]).createElement(i(d[3]),{isLink:!1,profilePictureUrl:E[0].profile_pic_url,size:_,username:E[0].username}),v&&a(d[1]).createElement(i(d[4]),{isGroup:!0,size:c}))))});e.default=l},9830421,[9830423,3,9633821,9633802,9830424,9502826,9830419,5]);
__d(function() {},9830423,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),r(d[0]);var t=({isGroup:t,size:l})=>{!t||'tiny'!==l&&'atomic'!==l||i(d[1])(0);let u=l;return t&&('default'===l?u='medium':'medium'===l?u='small':'small'===l&&(u='tiny')),a(d[2]).createElement("div",{className:`rSxHQ ${'default'===u?"evOYH":""} ${'medium'===u?"NNYCi":""} ${'small'===u?"N5w0k":""} ${'tiny'===u?"jkcsl":""} ${'atomic'===u?"-rEye":""}`})};e.default=t},9830424,[9830425,9502826,3]);
__d(function() {},9830425,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});var t=({candidateId:t,icon:n,isSelected:l,onToggleCandidate:o,subtitle:c,title:E})=>a(d[0]).createElement(r(d[1]).ListItem,{action:a(d[0]).createElement(r(d[1]).IconButton,{alt:r(d[2]).TOGGLE_SELECTION,icon:l?r(d[1]).ICONS.CIRCLE_CHECK_FILLED_24_BLUE5:r(d[1]).ICONS.CIRCLE_OUTLINE_24_GREY2,noMinSize:!0,onClick:()=>{o(t)}}),icon:n,key:E,onBodyClick:()=>{o(t)},subtitle:c,title:a(d[0]).createElement(r(d[1]).Text.BodyEmphasized,null,E)});e.default=t},9830409,[3,9633821,9830413]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});e.getThreadTitle=function(t,n){return''!==t?t:n},e.getPendingRequestsCount=function(t){return 1===t?r(d[0])(3135,{count:t}):r(d[0])(1465,{count:t})},e.getPendingRequestsNavLabel=function(t){return t>99?r(d[0])(1784):r(d[0])(1948,{count:t})},e.getGeneralMessagePreview=((t,n,u)=>n?r(d[1]).GENERAL_MESSAGE_OWN_SENT:u&&null!=t?r(d[1]).generalMessageGroupSent(t):r(d[1]).GENERAL_MESSAGE_SENT),e.getSimpleTextPreview=((t,n,u,o)=>o?(null==n||u?r(d[1]).YOU_STRING:n)+': '+t:t),e.getMediaSharePreview=function(t,n,u){return n?r(d[1]).MEDIA_SHARE_OWN_SENT:u&&t?r(d[1]).mediaShareGroupSent(t):r(d[1]).MEDIA_SHARE_SENT},e.getReelSharePreview=function(t,n,u){switch(t.reel_share.type){case'mention':return n?null!=u?r(d[1]).mentionedInYourStory(u):'':r(d[1]).MENTIONED_YOU_IN_STORY;case'reaction':return null==t.reel_share.reaction_info?'':n?r(d[1]).reactedToTheirStory(t.reel_share.reaction_info.emoji):r(d[1]).reactedToYourStory(t.reel_share.reaction_info.emoji);case'reply':return n?r(d[1]).REPLIED_TO_THEIR_STORY:`${r(d[1]).REPLIED_TO_YOUR_STORY}: ${t.reel_share.text}`;case'reply_gif':return n?r(d[1]).REPLIED_TO_THEIR_STORY:r(d[1]).REPLIED_TO_YOUR_STORY}return''},e.getStorySharePreview=function(t,n,u,o){return t===r(d[2]).ReelTypes.HIGHLIGHT_REEL?u?r(d[1]).REEL_SHARE_HIGHLIGHT_OWN_SENT:o&&n?r(d[1]).reelShareHighlightGroupSent(n):r(d[1]).REEL_SHARE_HIGHLIGHT_SENT:u?r(d[1]).REEL_SHARE_OWN_SENT:o&&n?r(d[1]).reelShareGroupSent(n):r(d[1]).REEL_SHARE_SENT},e.getStoryShareHeader=function(t,n,u){return null==n?r(d[1]).STORY_UNAVAILABLE_HEADER:t===r(d[2]).ReelTypes.HIGHLIGHT_REEL?u?r(d[1]).youSentUsersStoryHighlight(n):r(d[1]).sentUsersStoryHighlight(n):u?r(d[1]).youSentUsersStory(n):r(d[1]).sentUsersStory(n)},e.getGroupSeenMessage=function(t){switch(t.length>0||i(d[3])(0),t.length){case 1:return r(d[1]).seenByOneUser(t[0]);case 2:return r(d[1]).seenByTwoUsers(t[0],t[1]);default:return r(d[1]).seenByMoreThanTwoUsers(t[0],t[1],t.length-2)}},e.getGroupSubtitle=function(t){switch(t.length>0||i(d[3])(0),t.length){case 1:return t[0];case 2:return r(d[1]).groupWithTwoUsers(t[0],t[1]);default:return r(d[1]).groupWithMoreThanTwoUsers(t[0],t[1],t.length-2)}},e.getDirectPageTitle=function(t,n){return null!=t&&t>0?`(${t}) ${n}`:n}},9830422,[9633796,9830413,9830426,9502826]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});var c=a(d[0]).memo(function(c){return a(d[0]).createElement(i(d[1]),i(d[2])({},c,{viewBox:"0 0 48 48"}),a(d[0]).createElement("path",{clipRule:"evenodd",d:"M41.8 9.8L27.5 24l14.2 14.2c.6.6.6 1.5 0 2.1l-1.4 1.4c-.6.6-1.5.6-2.1 0L24 27.5 9.8 41.8c-.6.6-1.5.6-2.1 0l-1.4-1.4c-.6-.6-.6-1.5 0-2.1L20.5 24 6.2 9.8c-.6-.6-.6-1.5 0-2.1l1.4-1.4c.6-.6 1.5-.6 2.1 0L24 20.5 38.3 6.2c.6-.6 1.5-.6 2.1 0l1.4 1.4c.6.6.6 1.6 0 2.2z",fillRule:"evenodd"}))});e.default=c},9830411,[3,9830427,9633864]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),r(d[0]);const t=t=>{switch(t.type){case'thread':return t.candidate.thread_title;case'user':return t.candidate.username;default:return i(d[1])('Expected candidate of type thread or user'),''}};var n=({onRemoveRecipient:n,onTextInputChange:u,query:l,recipients:c})=>{const[o,s]=r(d[2]).useState(!0),[p,E]=r(d[2]).useState(null),f=r(d[2]).useRef(null),h=r(d[2]).useRef(null);r(d[2]).useEffect(()=>{h.current&&h.current.focus(),o&&null!=f.current&&f.current.scrollIntoView(),s(!0)},[c,o]);const y=t=>{E(null),s(!1),n(t)},C=[...c.keys()];return a(d[2]).createElement("div",{className:"hzPAB"},a(d[2]).createElement(r(d[3]).Box,{justifyContent:"start",paddingX:3,paddingY:1,width:52},a(d[2]).createElement(r(d[3]).Text.Section,{zeroMargin:!0},r(d[4]).TO_LABEL_STRING)),a(d[2]).createElement("div",{className:`${r(d[5]).isDesktop()?"":"BIyw3"} ${r(d[5]).isDesktop()?"HeuYH":""}`},a(d[2]).createElement(i(d[6]),{event:"keydown",handler:()=>{null!=p&&y(p)},target:document.body}),C.map(n=>a(d[2]).createElement(i(d[7]),{key:n,onClick:()=>{p===n?y(n):E(n)},onRemoveClick:y,selectedToken:p,userId:n,username:t(i(d[8])(c.get(n)))})),a(d[2]).createElement(r(d[3]).TextInput,{autoComplete:"off",backgroundColor:"transparent",name:"queryBox",onChange:u,onFocus:()=>E(null),onKeyDown:t=>{t.keyCode===i(d[9]).BACKSPACE&&0===l.length&&(E(C[C.length-1]),h.current&&h.current.blur())},placeholder:r(d[4]).SEARCH_USER_BOX_PLACEHOLDER,ref:h,spellCheck:!1,value:l}),a(d[2]).createElement("div",{ref:f})))};e.default=n},9830417,[9830428,9633859,3,9633821,9830413,9633829,9830429,9830430,9633799,9830431]);
__d(function() {},9830428,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});var t=({onClick:t,onRemoveClick:n,selectedToken:o,userId:c,username:l})=>{const s=o===c,u=s?'ig-primary-button':'web-secondary-action',E=s?'web-always-white':'ig-primary-button';return a(d[0]).createElement(r(d[1]).Box,{color:u,direction:"row",height:35,justifyContent:"center",margin:1,paddingX:3,shape:"rounded"},a(d[0]).createElement(r(d[1]).Button,{borderless:!0,onClick:t},a(d[0]).createElement(r(d[1]).Text,{color:E},l)),(s||r(d[2]).isDesktop())&&a(d[0]).createElement(r(d[1]).Box,{justifyContent:"center",marginStart:2},a(d[0]).createElement(i(d[3]),{onClick:()=>n(c),padding:0},a(d[0]).createElement(i(d[4]),{alt:r(d[5]).DELETE_ITEM_TEXT,color:E,size:12}))))};e.default=t},9830430,[3,9633821,9633829,9830410,9830411,9830413]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(t){return a(d[1]).createElement(l,null,n=>a(d[1]).createElement(p,i(d[2])({},t,{__addRef:n.addRef,__removeRef:n.removeRef,key:t.targetId})))}Object.defineProperty(e,'__esModule',{value:!0});const n=new(r(d[0]).Map),o={map:n,addRef:()=>{},removeRef:()=>{}},{Provider:s,Consumer:l}=a(d[1]).createContext(o);class p extends a(d[1]).Component{constructor(...t){super(...t),this.$InnerPortalTarget1=a(d[1]).createRef()}componentDidMount(){this.props.__addRef(this.props.targetId,this.$InnerPortalTarget1)}componentWillUnmount(){this.props.__removeRef(this.props.targetId,this.$InnerPortalTarget1)}render(){const{__addRef:t,__removeRef:n,element:o,targetId:s,...l}=this.props;return a(d[1]).createElement(o,i(d[2])({ref:this.$InnerPortalTarget1},l))}}t.defaultProps={element:'div'},e.TargetedPortalProvider=class extends a(d[1]).Component{constructor(...t){super(...t),this.state={map:n},this.$TargetedPortalProvider1=((t,n)=>{this.setState(o=>({map:o.map.update(t,new(r(d[0]).Set),t=>t.add(n))}))}),this.$TargetedPortalProvider2=((t,n)=>{this.setState(o=>({map:o.map.update(t,new(r(d[0]).Set),t=>t.remove(n))}))})}render(){const t={map:this.state.map,addRef:this.$TargetedPortalProvider1,removeRef:this.$TargetedPortalProvider2};return a(d[1]).createElement(s,{value:t},this.props.children)}},e.PortalTarget=t,e.PortalTo=function(t){const{targetId:n,children:o}=t;return a(d[1]).createElement(l,null,t=>{const s=t.map.get(n);return s?s.map(t=>t.current&&void 0!==o?r(d[3]).createPortal(o,t.current):null).toArray():null})}},9830416,[2,3,9633864,4]);